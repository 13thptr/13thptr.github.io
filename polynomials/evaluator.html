<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Polynomial Evaluator</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/decimal.js/10.4.3/decimal.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css">
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
        }

        .container {
            background: white;
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
        }

        h1 {
            text-align: center;
            color: #4a5568;
            margin-bottom: 30px;
            font-size: 2.5em;
        }

        .section {
            margin-bottom: 25px;
            padding: 20px;
            border: 2px solid #e2e8f0;
            border-radius: 10px;
            background: #f8fafc;
        }

        .section h2 {
            margin-top: 0;
            color: #2d3748;
            border-bottom: 2px solid #4299e1;
            padding-bottom: 10px;
        }

        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #4a5568;
        }

        input, select, button {
            width: 100%;
            padding: 12px;
            border: 2px solid #cbd5e0;
            border-radius: 8px;
            font-size: 16px;
            transition: all 0.3s ease;
            box-sizing: border-box;
        }

        input:focus, select:focus {
            outline: none;
            border-color: #4299e1;
            box-shadow: 0 0 0 3px rgba(66, 153, 225, 0.1);
        }

        button {
            background: linear-gradient(135deg, #4299e1, #3182ce);
            color: white;
            border: none;
            cursor: pointer;
            font-weight: 600;
            margin-top: 10px;
        }

        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(66, 153, 225, 0.4);
        }

        .polynomial-display {
            background: white;
            border: 2px solid #e2e8f0;
            border-radius: 8px;
            padding: 20px;
            margin: 15px 0;
            min-height: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2em;
        }

        .results {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-top: 20px;
        }

        .result-box {
            background: #f7fafc;
            border: 2px solid #e2e8f0;
            border-radius: 8px;
            padding: 15px;
            word-break: break-all;
        }

        .result-box h3 {
            margin-top: 0;
            color: #2d3748;
        }

        .result-value {
            font-family: 'Courier New', monospace;
            background: white;
            padding: 10px;
            border-radius: 5px;
            border: 1px solid #cbd5e0;
            margin: 10px 0;
            min-height: 40px;
            display: flex;
            align-items: center;
        }

        .copy-btn {
            width: auto;
            padding: 8px 16px;
            font-size: 14px;
            margin-top: 5px;
        }

        .error {
            color: #e53e3e;
            background: #fed7d7;
            border: 1px solid #feb2b2;
            padding: 10px;
            border-radius: 5px;
            margin-top: 10px;
        }

        .transcendental-info {
            font-size: 0.9em;
            color: #718096;
            margin-top: 5px;
        }

        @media (max-width: 768px) {
            .results {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Polynomial Evaluator</h1>
        
        <div class="section">
            <h2>Settings</h2>
            <label for="precision">Calculation Precision (decimal places):</label>
            <input type="number" id="precision" min="10" max="200" value="50" placeholder="Enter precision (10-200)">
        </div>

        <div class="section">
            <h2>Polynomial Input</h2>
            <label for="coefficients">Coefficients (highest degree first, comma-separated positive integers):</label>
            <input type="text" id="coefficients" placeholder="e.g., 1,2,3 for x² + 2x + 3" value="1,2,3">
            <div class="polynomial-display" id="polynomial-display">
                Enter coefficients to see polynomial
            </div>
        </div>

        <div class="section">
            <h2>Integer Evaluation</h2>
            <label for="integer-input">Evaluate at integer:</label>
            <input type="number" id="integer-input" placeholder="Enter integer value" value="2">
            <button onclick="evaluateAtInteger()">Evaluate at Integer</button>
        </div>

        <div class="section">
            <h2>Transcendental Number Evaluation</h2>
            <label for="transcendental-select">Select transcendental number:</label>
            <select id="transcendental-select">
                <optgroup label="Numbers between 0 and 1">
                    <option value="liouville_10">Liouville number (base-10)</option>
                    <option value="liouville_2">Liouville number (base-2)</option>
                    <option value="pi_frac">π - 3</option>
                    <option value="e_frac">e - 2</option>
                    <option value="gelfond_frac">2^√2 - 2</option>
                </optgroup>
                <optgroup label="Numbers between 1 and 2">
                    <option value="liouville_10_plus1">1 + Liouville (base-10)</option>
                    <option value="liouville_2_plus1">1 + Liouville (base-2)</option>
                    <option value="pi_frac_plus1">π - 2</option>
                    <option value="e_frac_plus1">e - 1</option>
                    <option value="gelfond_frac_plus1">2^√2 - 1</option>
                </optgroup>
            </select>
            <div class="transcendental-info" id="transcendental-info"></div>
            <button onclick="evaluateAtTranscendental()">Evaluate at Transcendental Number</button>
        </div>

        <div class="results">
            <div class="result-box">
                <h3>Integer Result</h3>
                <div class="result-value" id="integer-result">Result will appear here</div>
                <button class="copy-btn" onclick="copyToClipboard('integer-result')">Copy Result</button>
            </div>
            <div class="result-box">
                <h3>Transcendental Result</h3>
                <div class="result-value" id="transcendental-result">Result will appear here</div>
                <button class="copy-btn" onclick="copyToClipboard('transcendental-result')">Copy Result</button>
            </div>
        </div>
    </div>

    <script>
        let currentPrecision = 50;
        Decimal.set({ precision: currentPrecision });

        function getTranscendentals() {
            return {
                liouville_10: new Decimal('0.11000100000000000000000100000000000000000000000000000000000000000000000000000000000000000000000001'),
                liouville_2: new Decimal('0.11000100000000000000000100000000000000000000000000000000000000000000000000000000000000000000000001'),
                pi_frac: new Decimal('0.14159265358979323846264338327950288419716939937510582097494459230781640628620899862803482534211706'),
                e_frac: new Decimal('0.71828182845904523536028747135266249775724709369995957496696762772407663035354759457138217852516643'),
                gelfond_frac: new Decimal('0.66514414269022518865029567372204985358467962648080768331715880439170210077073647106840620473776')
            };
        }

        function getAllTranscendentals() {
            const base = getTranscendentals();
            const all = { ...base };
            
            Object.keys(base).forEach(key => {
                all[key + '_plus1'] = base[key].plus(1);
            });
            
            return all;
        }

        function updatePrecision() {
            const precisionInput = document.getElementById('precision');
            const newPrecision = parseInt(precisionInput.value);
            
            if (newPrecision >= 10 && newPrecision <= 200) {
                currentPrecision = newPrecision;
                Decimal.set({ precision: currentPrecision });
                
                document.getElementById('integer-result').textContent = 'Precision updated - re-evaluate';
                document.getElementById('transcendental-result').textContent = 'Precision updated - re-evaluate';
                
                updateTranscendentalInfo();
            } else {
                alert('Precision must be between 10 and 200');
                precisionInput.value = currentPrecision;
            }
        }

        function parseCoefficients(input) {
            const coeffs = input.split(',').map(c => c.trim());
            const result = [];
            
            for (const coeff of coeffs) {
                if (!/^\d+$/.test(coeff)) {
                    throw new Error('All coefficients must be positive integers');
                }
                result.push(parseInt(coeff));
            }
            
            if (result.length === 0) {
                throw new Error('At least one coefficient is required');
            }
            
            return result;
        }

        function displayPolynomial(coefficients) {
            const display = document.getElementById('polynomial-display');
            
            try {
                const coeffs = parseCoefficients(coefficients);
                const degree = coeffs.length - 1;
                let latex = '';
                
                for (let i = 0; i < coeffs.length; i++) {
                    const coeff = coeffs[i];
                    const power = degree - i;
                    
                    if (i > 0) latex += ' + ';
                    
                    if (power === 0) {
                        latex += coeff.toString();
                    } else if (power === 1) {
                        if (coeff === 1) {
                            latex += 'x';
                        } else {
                            latex += coeff + 'x';
                        }
                    } else {
                        if (coeff === 1) {
                            latex += 'x^{' + power + '}';
                        } else {
                            latex += coeff + 'x^{' + power + '}';
                        }
                    }
                }
                
                katex.render(latex, display);
            } catch (error) {
                display.innerHTML = '<span class="error">Error: ' + error.message + '</span>';
            }
        }

        function evaluatePolynomial(coefficients, x) {
            let result = new Decimal(0);
            
            for (const coeff of coefficients) {
                result = result.mul(x).plus(coeff);
            }
            
            return result;
        }

        function evaluateAtInteger() {
            const coeffInput = document.getElementById('coefficients').value;
            const integerInput = document.getElementById('integer-input').value;
            const resultDiv = document.getElementById('integer-result');
            
            try {
                const coeffs = parseCoefficients(coeffInput);
                const x = new Decimal(integerInput);
                const result = evaluatePolynomial(coeffs, x);
                
                resultDiv.textContent = result.toString();
                resultDiv.classList.remove('error');
            } catch (error) {
                resultDiv.innerHTML = '<span class="error">Error: ' + error.message + '</span>';
            }
        }

        function evaluateAtTranscendental() {
            const coeffInput = document.getElementById('coefficients').value;
            const transcendentalKey = document.getElementById('transcendental-select').value;
            const resultDiv = document.getElementById('transcendental-result');
            
            try {
                const coeffs = parseCoefficients(coeffInput);
                const transcendentals = getAllTranscendentals();
                const x = transcendentals[transcendentalKey];
                const result = evaluatePolynomial(coeffs, x);
                
                resultDiv.textContent = result.toString();
                resultDiv.classList.remove('error');
            } catch (error) {
                resultDiv.innerHTML = '<span class="error">Error: ' + error.message + '</span>';
            }
        }

        function updateTranscendentalInfo() {
            const select = document.getElementById('transcendental-select');
            const info = document.getElementById('transcendental-info');
            const key = select.value;
            const transcendentals = getAllTranscendentals();
            const value = transcendentals[key];
            
            const descriptions = {
                liouville_10: 'Liouville number in base-10: 0.110001000000000000000001...',
                liouville_2: 'Liouville number in base-2: 0.110001000000000000000001...',
                pi_frac: 'π - 3 (fractional part of π)',
                e_frac: 'e - 2 (fractional part of e)',
                gelfond_frac: '2^√2 - 2 (Gelfond-Schneider constant minus 2)',
                liouville_10_plus1: '1 + Liouville (base-10)',
                liouville_2_plus1: '1 + Liouville (base-2)',
                pi_frac_plus1: 'π - 2',
                e_frac_plus1: 'e - 1',
                gelfond_frac_plus1: '2^√2 - 1'
            };
            
            const displayLength = Math.min(currentPrecision + 5, 60);
            info.innerHTML = descriptions[key] + '<br>Value: ' + value.toString().substring(0, displayLength) + '...';
        }

        function copyToClipboard(elementId) {
            const element = document.getElementById(elementId);
            const text = element.textContent;
            
            if (navigator.clipboard) {
                navigator.clipboard.writeText(text).then(() => {
                    const button = element.nextElementSibling;
                    const originalText = button.textContent;
                    button.textContent = 'Copied!';
                    setTimeout(() => {
                        button.textContent = originalText;
                    }, 2000);
                });
            } else {
                const textArea = document.createElement('textarea');
                textArea.value = text;
                document.body.appendChild(textArea);
                textArea.focus();
                textArea.select();
                document.execCommand('copy');
                document.body.removeChild(textArea);
                
                const button = element.nextElementSibling;
                const originalText = button.textContent;
                button.textContent = 'Copied!';
                setTimeout(() => {
                    button.textContent = originalText;
                }, 2000);
            }
        }

        window.addEventListener('load', () => {
            // Restore saved polynomial or use default
            const savedCoeffs = document.getElementById('coefficients').value;
            const coeffsToUse = savedCoeffs || '1,2,3';
            
            // Set the input value and display the polynomial
            document.getElementById('coefficients').value = coeffsToUse;
            displayPolynomial(coeffsToUse);
            
            // Event listeners
            document.getElementById('precision').addEventListener('change', updatePrecision);
            document.getElementById('precision').addEventListener('keypress', (e) => {
                if (e.key === 'Enter') {
                    updatePrecision();
                }
            });

            document.getElementById('coefficients').addEventListener('input', (e) => {
                displayPolynomial(e.target.value);
            });

            document.getElementById('transcendental-select').addEventListener('change', updateTranscendentalInfo);

            document.getElementById('integer-input').addEventListener('keypress', (e) => {
                if (e.key === 'Enter') {
                    evaluateAtInteger();
                }
            });

            updateTranscendentalInfo();
        });
    </script>
</body>
</html>